---
layout: single
title: "자바의 컴파일 과정에 대하여"
categories: java
typora-root-url: ../

---


## 1. 서론
해당 포스트는 자바의 컴파일 과정이 어떤 방식으로 이루어지는지 공부해보고 이를 정리하고자 작성하게 되었다.

자바의 컴파일 과정에 대해 알아보기 전에 우선 컴파일이 무엇인지에 대해 알아보자면 컴파일이란, 인간이 이해할 수 있는 형태로 작성된 코드를 컴퓨터가 이해할 수 있는 형태인 기계어로 변환하는 작업을 말한다. 자바는 이러한 컴파일 과정을 거쳐 프로그램이 실행되는데, 그렇다고 자바가 컴파일 언어인가? 라고 질문한다면 "자바는 컴파일 언어와 인터프리터 언어의 특성을 모두 가진 언어이다." 라고 답할수있겠다. 이는 자바의 컴파일 과정에서 답을 찾을 수 있는데 그렇다면 해당 포스트의 주제인 자바의 컴파일 과정에 대해 본격적으로 살펴보자.


## 2. 대략적인 컴파일 과정

![compile](/images/2025-02-13-compile/compile.png){: width="70%" max-width="700px" height="auto"}

우선 대략적인 자바의 컴파일 과정을 보면 위 그림과 같다. 그림의 내용을 하나하나 살펴보자면

1. 자바로 작성된 소스코드가 있다. 하지만 자바언어는 컴퓨터가 이해할 수 없기 때문에 프로그램을 실행시키기 위해서는 컴파일 과정을 거쳐야 한다.
2. 여기서 javac 명령어로 자바로 작성된 코드를 실행하면 자바 컴파일러가 컴파일을 하게 되고 확장자가 .class인 파일이 생성된다.
3. 2번 과정에서 자바 컴파일러에 의해 컴파일되어 .class 파일이 생성되었다고 했지만 아직 컴퓨터가 이해할 수 있는 형태로 변환된 것은 아니다. .class 파일은 JVM 내에 JIT 컴파일러에 의해 최종적으로 컴퓨터가 이해할 수 있는 형태로 컴파일 되어 전달된다.
4. 이 과정을 거쳐 마침내 컴퓨터는 자바로 작성된 코드를 실행시킬 수 있게 된다.

대략적인 컴파일 과정을 살펴보았는데, 문득 궁금한 점이 생기게 된다. 자바로 작성된 코드를 처음부터 컴퓨터가 이해할 수 있는 형태로 컴파일하지 않고 왜 JVM을 거쳐서 한번 더 컴파일 하는 것일까? 사실 이렇게 하나의 과정을 더 거치는 데에는 이유가 있는데 다음 목차에서는 이 이유에 대해서 자세히 살펴보자.


## 3. JVM을 거쳐서 한번 더 컴파일 하는 이유

자바가 컴파일 과정에서 JVM을 거쳐 한번 더 컴파일을 하는 이유는 컴파일 언어들의 단점 중 하나인 컴파일된 실행 파일이 해당 OS에서만 실행된다는 점을 보완하기 위해서이다. 그림으로 살펴보면서 이야기해보자.

![no_jvm](/images/2025-02-13-compile/no_jvm-9930531.png){: width="80%" max-width="700px" height="auto"}

위 그림은 자바가 아닌 컴파일 언어의 각 OS별 실행 과정을 간단한 그림으로 표현한 것이다. 이처럼 컴파일 언어는 컴파일 과정에서 해당 OS에 맞는 기계어로 변환되기 때문에 각 OS에 맞게 각각 컴파일을 해줘야 한다. 하지만 자바는 Write Once Run Anywhere 즉, 한 번 작성한 코드를 다양한 운영 체제에서 실행할 수 있어야 한다는 기본 철학에 따라, JVM이라는 가상 머신을 통해 OS에 독립적으로 동작할 수 있도록 설계되었다. 아래 그림을 살펴보자.



![jvm](/images/2025-02-13-compile/jvm.png){: width="80%" max-width="700px" height="auto"}

위 그림과 달리 자바는 각 OS에 JVM만 설치 되어있으면, 하나의 코드로 모든 OS에서 프로그램을 실행시킬 수 있게 된다. 따라서, 첫 단계에서 자바 컴파일러로 컴파일 한 .class 파일은 JVM이 이해할 수 있도록 변환 된 바이트코드이고, 이 파일을 JVM이 읽고 JIT 컴파일러를 통해 프로그램 실행 시점에 해당 OS에 맞는 기계어로 변환되어  프로그램이 실행되게 되는 것이다. 이러한 특성으로 인해 자바는 컴파일 언어와 인터프리터 언어의 장점을 모두 활용하는 하이브리드 언어라고 할 수 있다.


## 4. 마무리

자바의 컴파일 과정을 간단히 정리해보았다. 평소 자바를 공부하면서 무언가를 구현하는 데에만 집중하여 문법이나 아키텍처 위주로 공부하다 보니, 이러한 기본적인 원리들을 등한시했던 것 같다. 하지만 이번에 포스트를 작성하며 포스트 내용 이외에도 자바의 탄생 배경, JVM의 구조 등 자바에 대한 이해가 더욱 깊어졌고, 자연스럽게 자바와 더 가까워진 느낌이 들어 뿌듯했다.



